<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Changelog</title>
    <link rel="stylesheet" href="../style.css"> 
    <script src="../script.js" defer></script>
    <link rel="icon" href="../mkfavicon.ico" sizes="any">
    <link rel="icon" href="../mkfavicon-512.png" type="image/png">
    <link rel="apple-touch-icon" href="../mkfavicon-apple.png">
    <meta name="theme-color" content="#101020">
</head>
<body>
    
    <header class="floating-nav">
        <div class="nav-top-row">
            <a href="../index.html" class="momokernel-logo">momokernel</a>

            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>

            <nav role="navigation">
                <ul class="globalnav-list">
                    <li class="globalnav-item" id="menu-toggle-item">
                        <a href="#" class="globalnav-link">Menü</a>
                    </li>
                    <li class="globalnav-item"><a href="handbuecher.html" class="globalnav-link">Handbücher</a></li>
                    <li class="globalnav-item"><a href="applauncher.html" class="globalnav-link">AppLauncher</a></li>
                    <li class="globalnav-item"><a href="changelog.html" class="globalnav-link">Changelog</a></li>
                    <li class="globalnav-item"><a href="downloads.html" class="globalnav-link globalnav-link-accent">Downloads</a></li>
                </ul>
            </nav>
        </div>
        
        <div class="globalnav-flyout">
            <div class="flyout-content-grid">
                <div class="flyout-column">
                    <h4>Projekte</h4>
                    <ul>
                        <li><a href="../projekte/fusionOS.html">fusionOS</a></li>
                        <li><a href="../projekte/homeOS.html">homeOS</a></li>
                        <li><a href="../projekte/themelibrary.html">ThemeLibrary</a></li>
                        <li><a href="../projekte/next.html">N.E.X.T.</a></li>
                        <li><a href="../projekte/z.html">Z- The Cold War</a></li>
                        <li><a href="../projekte/frontlines.html">Frontlines</a></li>
                    </ul>
                </div>
                
                <div class="flyout-column">
                    <h4>Anleitungen</h4>
                    <ul>
                        <li><a href="../about/windowsabertiefer.html">Windows- Was sich hinter dem System versteckt</a></li>
                        <li><a href="../about/macosabertiefer.html">macOS- Was sich hinter dem System versteckt</a></li>
                        <li><a href="../about/powerpointmorphism.html">Powerpoint Pro Präsentationen für Einsteiger</a></li>
                        <li><a href="../about/finalcutprofuereinsteiger.html">Final Cut Pro für Einsteiger</a></li>
                        <li><a href="../about/aftereffectsfuereinsteiger.html">After Effects für Einsteiger</a></li>
                    </ul>
                </div>
                
                <div class="flyout-column flyout-teaser-column">
                    <h4>fusionOS Beta</h4>
                    <a href="../OS Beta/fusionOSbeta.html" class="teaser-link">
                        <div class="teaser-image-placeholder">BALD VERFÜGBAR</div>
                        <p class="teaser-text">Warteliste für die fusionOS 0.1 Pre-Beta</p>
                    </a>
                    <div class="small-links">
                        <a href="../extra/archiv.html">Archiv</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="page-content">
        <div class="main-heading-container">
            <h1 class="main-heading">Changelog</h1>
        </div>
        
        <div class="changelog-container">
            
            <h2 id="commits-heading">Aktuelle Commits</h2>
            <div id="commits-list" class="changelog-section">
                <p>Lade Commits...</p>
            </div>
        </div>
    </main>

    <script>
        const GITHUB_OWNER = 'momokernel';
        const GITHUB_REPO = 'momokernels-website';

        const COMMITS_URL = `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/commits?per_page=30`;

        async function fetchGitHubData() {
            try {
                const commitsResponse = await fetch(COMMITS_URL);

                const commits = await commitsResponse.json();

                if (commitsResponse.ok) {
                    renderCommits(commits);
                } else {
                    document.getElementById('commits-list').innerHTML = `<p class="error-message">Fehler beim Laden der Repo Commits: ${commits.message || 'Bitte GITHUB_REPO prüfen!'}</p>`;
                }

            } catch (error) {
                console.error("Fehler beim Abrufen der Repo-Daten:", error);
                document.getElementById('commits-list').innerHTML = `<p class="error-message">Konnte GitHub nicht erreichen oder die Repository-Namen sind falsch.</p>`;
            }
        }

        function renderCommits(commits) {
            const list = document.getElementById('commits-list');
            list.innerHTML = ''; 

            if (!Array.isArray(commits) || commits.length === 0) {
                list.innerHTML = '<p>Keine Commits gefunden.</p>';
                return;
            }

            const ul = document.createElement('ul');
            ul.className = 'commit-list'; 

            commits.forEach(commitData => {
                const commit = commitData.commit;
                const author = commit.author;
                const date = new Date(author.date).toLocaleDateString('de-DE', { hour: '2-digit', minute: '2-digit', day: 'numeric', month: 'short' });

                const listItem = document.createElement('li');
                listItem.className = 'commit-item';
                listItem.innerHTML = `
                    <div class="commit-header">
                        <span class="commit-message">${commit.message.split('\n')[0]}</span>
                        <span class="commit-date">${date}</span>
                    </div>
                    <div class="commit-meta">
                        ${commit.author.name} &bull; <a href="${commitData.html_url}" target="_blank">${commitData.sha.substring(0, 7)}</a>
                    </div>
                `;
                ul.appendChild(listItem);
            });
            list.appendChild(ul);
        }

        document.addEventListener('DOMContentLoaded', fetchGitHubData);
    </script>
</body>
</html>
